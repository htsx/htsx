!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).htsx=t()}(this,function(){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a={},c={};HTMLElement.prototype.addEventListenerProxy=HTMLElement.prototype.addEventListener,HTMLElement.prototype.addEventListener=function(e,t){this.addEventListenerProxy(e,t),this.listeners||(this.listeners=[]),this.listeners.push({event:e,handler:t})};var d=function(e,t,n){var r=e.getAttribute(t);r&&(e.removeAttribute(t),e.addEventListener(n,function(e){return a[r].call(e.target,e)}))},u=function(t){var e=t.getAttribute("data-append");e&&(t.removeAttribute("data-append"),Array.isArray(c[e])?c[e].forEach(function(e){"string"==typeof e?t.append(e):t.appendChild(function t(e){var n=e.cloneNode(!1);return e.listeners&&e.listeners.forEach(function(t){n.addEventListener(t.event,function(e){return t.handler.call(e.target,e)})}),e.childNodes.length&&Array.from(e.childNodes).forEach(function(e){return n.appendChild(t(e))}),n}(e))}):t.appendChild(c[e]),delete c[e])};return function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=e.map(function(e,t){var n=Date.now()+t;switch(i(r[t])){case"function":return a[n]=r[t],"".concat(e).concat(n);case"object":return c[n]=r[t],"".concat(e,'<div data-append="').concat(n,'"></div>');default:return"".concat(e).concat(r[t]||"")}}).join("");return function t(e){var n="BODY"===e[0].parentElement.tagName?document.createElement("div"):e[0].parentElement;return Array.from(e).forEach(function(e){e.getAttribute&&(d(e,"onClick","click"),d(e,"onKeyPress","keypress"),d(e,"onKeyUp","keyup"),d(e,"onChange","onchange"),d(e,"onMouseOver","onmouseover"),d(e,"onMouseOut","onmouseout"),u(e)),e.childNodes.length&&t(e.childNodes),n.appendChild(e)}),n}((new DOMParser).parseFromString(o,"text/html").body.childNodes)}});
